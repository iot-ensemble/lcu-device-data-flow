<div *ngIf="!State.Loading">
  <div class="manage-header"></div>

  <div class="manage">
    <div
      class="devices spread"
      fxLayout="row wrap"
      fxLayoutAlign="center center"
    >
      <div fxFlex="50%" fxFlex.lt-md="100%">
        <div class="emulated widget">
          <mat-card>
            <mat-card-header>
              <mat-card-title>Emulated Devices</mat-card-title>
            </mat-card-header>

            <mat-card-content>
              <p>
                When enabled, emulated device data will be provided in your data
                queries. The emulated device, is for smart room detection and
                provides temperature, humidity and occupancy of a room.
              </p>
            </mat-card-content>

            <mat-card-actions>
              <div fxFlex></div>

              <lcu-loader
                [loading]="EmulatedEnabledText == 'Saving...'"
              ></lcu-loader>

              <mat-slide-toggle
                #emulatedEnabled
                *ngIf="EmulatedEnabledText != 'Saving...'"
                [checked]="State.Emulated?.Enabled"
                (change)="ToggleEmulatedEnabledChanged($event)"
              >
                {{ EmulatedEnabledText }}
              </mat-slide-toggle>
            </mat-card-actions>
          </mat-card>
        </div>
      </div>

      <div fxFlex="50%" fxFlex.lt-md="100%">
        <div class="connected widget">
          <mat-card>
            <mat-card-header>
              <mat-card-title>Connected Devices</mat-card-title>
            </mat-card-header>

            <mat-card-content>
              <div class="">
                <!-- <div
                  *ngIf="isLoadingResults || isRateLimitReached"
                >
                  <mat-spinner *ngIf="isLoadingResults"></mat-spinner>
                  <div
                    class="example-rate-limit-reached"
                    *ngIf="isRateLimitReached"
                  >
                    GitHub's API rate limit has been reached. It will be reset
                    in one minute.
                  </div>
                </div> -->

                <div class="devices-table-container">
                  <table
                    mat-table
                    [dataSource]="State.Devices"
                    class="devices-table"
                  >
                    <!-- matSort
                        matSortActive="created"
                        matSortDisableClear
                        matSortDirection="desc" -->

                    <tr
                      mat-header-row
                      *matHeaderRowDef="ConnectedDevicesDisplayedColumns"
                    ></tr>

                    <tr
                      mat-row
                      *matRowDef="
                        let row;
                        columns: ConnectedDevicesDisplayedColumns
                      "
                    ></tr>

                    <!-- Title Column -->
                    <ng-container matColumnDef="deviceId">
                      <th mat-header-cell *matHeaderCellDef>DeviceID</th>

                      <td mat-cell *matCellDef="let row">{{ row.DeviceID }}</td>
                    </ng-container>

                    <!-- State Column -->
                    <ng-container matColumnDef="connStr">
                      <th mat-header-cell *matHeaderCellDef>
                        Connection String
                      </th>

                      <td mat-cell *matCellDef="let row">
                        <input [value]="row.ConnectionString" disabled />
                      </td>
                    </ng-container>

                    <!--
                    <ng-container matColumnDef="created">
                      <th
                        mat-header-cell
                        *matHeaderCellDef
                        mat-sort-header
                        disableClear
                      >
                        Created
                      </th>
                      <td mat-cell *matCellDef="let row">
                        {{ row.created_at | date }}
                      </td>
                    </ng-container> -->
                  </table>
                </div>

                <mat-paginator
                  [length]="State.Devices.length"
                  [pageSize]="10"
                ></mat-paginator>
              </div>
            </mat-card-content>

            <mat-card-actions>
              <div fxFlex></div>

              <!-- <lcu-loader
                [loading]="EmulatedEnabledText == 'Saving...'"
              ></lcu-loader> -->


              <button mat-raised-button>Add Device</button>
            </mat-card-actions>
          </mat-card>
        </div>
      </div>

      <div fxFlex="100%">
        <div class="dashboard widget">
          <mat-card>
            <mat-card-header>
              <mat-card-title>Devices Dashboard</mat-card-title>
            </mat-card-header>

            <mat-card-content>
              <iframe
                src="https://marketing1.fathym-it.com/freeboard"
                width="100%"
                height="1000px"
                frameborder="0"
              ></iframe>
            </mat-card-content>
          </mat-card>
        </div>
      </div>

      <div fxFlex="100%">
        <div class="reports widget">
          <mat-card>
            <mat-card-header>
              <mat-card-title>Device Reports</mat-card-title>
            </mat-card-header>
          </mat-card>
        </div>
      </div>

      <div fxFlex="100%">
        <div class="telemetry widget">
          <mat-card>
            <mat-card-header>
              <mat-card-title>Device Telemetry</mat-card-title>
            </mat-card-header>
          </mat-card>
        </div>
      </div>
    </div>

    <div class="storage-access">
      <mat-card>
        <mat-card-header>
          <mat-card-title>Storage Access</mat-card-title>
        </mat-card-header>
      </mat-card>
    </div>
  </div>
</div>

<lcu-loader [loading]="State.Loading"></lcu-loader>
